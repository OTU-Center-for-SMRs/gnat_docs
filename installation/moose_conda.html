<!DOCTYPE html><head><meta charset="UTF-8"><title>Building with the MOOSE Conda Environment | Gnat</title><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Gnat</a><a href="https://github.com/OTU-Center-for-Small-Modular-Reactors/gnat" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="10138da4-37c0-40d1-a5c6-ebe88cff8e43" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="6a011c6c-c619-40f7-b8c9-b0fa43cd8f7a" data-constrainWidth="false">Theory and Implementation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="8d79d82d-0c15-4d5a-9eb1-d04fe5803858" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publications.html">Publications</a></li><li><a href="../contact.html">Contact</a></li></ul><a href="#" class="sidenav-trigger" data-target="abcd073c-a89a-4e64-a8c0-89dcaf080a6b"><i class="material-icons">menu</i></a><ul class="sidenav" id="abcd073c-a89a-4e64-a8c0-89dcaf080a6b"><li><a href="#!" class="dropdown-trigger" data-target="aec3c998-0ced-4193-a248-e522fde34292" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="c3558635-ea43-4ecd-b44e-8e6cfe144c4b" data-constrainWidth="false">Theory and Implementation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="ccf2ae73-e8fc-4be5-9598-870cbf0c9152" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publications.html">Publications</a></li><li><a href="../contact.html">Contact</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="10138da4-37c0-40d1-a5c6-ebe88cff8e43"><li><a href="index.html">Installation</a></li><li><a href="../tutorials/index.html">Tutorials</a></li></ul><ul class="dropdown-content" id="6a011c6c-c619-40f7-b8c9-b0fa43cd8f7a"><li><a href="../about/radiation_transport.html">Radiation Transport</a></li><li><a href="../about/mobile_depletion.html">Fluid Depletion</a></li><li><a href="../about/implementation.html">Implementation</a></li></ul><ul class="dropdown-content" id="8d79d82d-0c15-4d5a-9eb1-d04fe5803858"><li><a href="../source/index.html">Gnat Source Pages</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Source Pages</a></li></ul><ul class="dropdown-content" id="aec3c998-0ced-4193-a248-e522fde34292"><li><a href="index.html">Installation</a></li><li><a href="../tutorials/index.html">Tutorials</a></li></ul><ul class="dropdown-content" id="c3558635-ea43-4ecd-b44e-8e6cfe144c4b"><li><a href="../about/radiation_transport.html">Radiation Transport</a></li><li><a href="../about/mobile_depletion.html">Fluid Depletion</a></li><li><a href="../about/implementation.html">Implementation</a></li></ul><ul class="dropdown-content" id="ccf2ae73-e8fc-4be5-9598-870cbf0c9152"><li><a href="../source/index.html">Gnat Source Pages</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Source Pages</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href="." class="breadcrumb">installation</a><a href="#" class="breadcrumb">moose_conda</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="d56f79bd-f8ee-40b3-b042-f6bf6d0c40d5" data-section-level="1" data-section-text="Building with the MOOSE Conda Environment"><h1 id="building-with-the-moose-conda-environment">Building with the MOOSE Conda Environment</h1><section class="scrollspy" id="3069d220-7dd0-40b8-8fdc-679155c18e47" data-section-level="2" data-section-text="1 . Installing the MOOSE Environment"><h2 id="1-installing-the-moose-environment">1. Installing the MOOSE Environment</h2><p>Gnat is a MOOSE-based application, and therefore requires an appropriate MOOSE environment. More detailed instructions for installing Mambaforge3 (a dependency manager) can be found on the MOOSE <a href="https://mooseframework.inl.gov/getting_started/installation/conda.html">installation page</a>. You can install Mambaforge3 with the following shell commands:</p><p>Linux:</p><pre class="moose-pre"><code class="language-bash">
curl -L -O https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-Linux-x86_64.sh
bash Mambaforge-Linux-x86_64.sh -b -p ~/mambaforge3
</code></pre><p>Macintosh without Apple Silicon:</p><pre class="moose-pre"><code class="language-bash">
curl -L -O https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-MacOSX-x86_64.sh
bash Mambaforge-MacOSX-x86_64.sh -b -p ~/mambaforge3
</code></pre><p>Macintosh with Apple Silicon:</p><pre class="moose-pre"><code class="language-bash">
curl -L -O https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-MacOSX-arm64.sh
bash Mambaforge-MacOSX-arm64.sh -b -p ~/mambaforge3
</code></pre><p>Once Mambaforge3 has been installed for your platform of choice, you need to configure it to add the MOOSE environment. To do so, add Mambaforge3 to your system PATH:</p><pre class="moose-pre"><code class="language-bash">
export PATH=$HOME/mambaforge3/bin:$PATH
</code></pre><p>Then, add the INL public channel:</p><pre class="moose-pre"><code class="language-bash">
conda config --add channels https://conda.software.inl.gov/public
</code></pre><p>Finally, initialize the Mambaforge3 shell:</p><pre class="moose-pre"><code class="language-bash">
mamba init
</code></pre><p>and create+install the MOOSE environment:</p><pre class="moose-pre"><code class="language-bash">
mamba create --name moose -q -y
mamba activate moose
mamba install moose-tools moose-libmesh
</code></pre><p>This will take some time, so feel free to walk away and get yourself a coffee (or other beverage of your choice). Once it&#x27;s complete deactivate your MOOSE environment to ensure the installation is applied.</p><pre class="moose-pre"><code class="language-bash">
mamba deactivate
</code></pre><p>After the installation is finished you can move on to cloning Gnat and MOOSE.</p></section><section class="scrollspy" id="7e5ad5aa-cf4c-4523-a3ef-78b788b46579" data-section-level="2" data-section-text="2 . Cloning Gnat and MOOSE"><h2 id="2-cloning-gnat-and-moose">2. Cloning Gnat and MOOSE</h2><p>Gnat comes with the MOOSE framework included as a Git submodule. For users who wish to develop applications alongside Gnat, use other sub-applications of Caribou, or use other MOOSE applications: it&#x27;s advised that you install MOOSE separately. This can be done by following all of the detailed instructions on the MOOSE <a href="https://mooseframework.inl.gov/getting_started/installation/conda.html">installation page</a>.</p><p>For users who only wish to use Gnat:</p><pre class="moose-pre"><code class="language-bash">
git clone https://github.com/OTU-Center-for-Small-Modular-Reactors/gnat.git
cd gnat
git submodule update --init
</code></pre><p>For users who want to develop/use other MOOSE applications:</p><pre class="moose-pre"><code class="language-bash">
git clone https://github.com/OTU-Center-for-Small-Modular-Reactors/gnat.git
</code></pre><p>Once the repository has been cloned, proceed to the next step.</p></section><section class="scrollspy" id="ebccaa9d-7298-4c36-bce7-2ef9d5957721" data-section-level="2" data-section-text="3 . Compile Gnat"><h2 id="3-compile-gnat">3. Compile Gnat</h2><p>Before continuing with the compilation process, ensure that the MOOSE environment has been activated in your shell. This can be done with the following command:</p><pre class="moose-pre"><code class="language-bash">
mamba activate moose
</code></pre><p>You can then compile the application using the <code>make</code> buildsystem:</p><pre class="moose-pre"><code class="language-bash">
make -j{NUM_PROCESSES}
</code></pre><p>Where <code>{NUM_PROCESSES}</code> is the number of concurrent processes you want building both Gnat and the MOOSE framework. You may also compile a debug version of Gnat by running <code>METHOD=dbg make
-j{NUM_PROCESSES}</code>.</p><p>Finally, run all tests to ensure that Gnat has been built successfully:</p><pre class="moose-pre"><code class="language-bash">
./run_tests -j{NUM_THREADS}
</code></pre><p>Where <code>{NUM_THREADS}</code> is the number of threads you want running tests.</p></section><section class="scrollspy" id="bebf87b5-06e8-45e5-8fd9-03c3a0382b7a" data-section-level="2" data-section-text="4 . Run Simulations"><h2 id="4-run-simulations">4. Run Simulations</h2><p>Gnat simulations use the hierarchical input text (HIT) input deck specification designed by INL for MOOSE-based applications. More information about HIT syntax can be found in the <a href="https://mooseframework.inl.gov/getting_started/examples_and_tutorials/tutorial01_app_development/step02_input_file.html#step-2-write-an-input-file">MOOSE tutorials</a>. Gnat input decks can be executed with the following shell command:</p><pre class="moose-pre"><code class="language-bash">
./gnat-opt -i input-file.i
</code></pre><p>Replace <code>input-file.i</code> with the name of your input file. Gnat can be executed in parallel using MPI and the following shell command:</p><pre class="moose-pre"><code class="language-bash">
mpirun -n{NUM_THREADS} ./gnat-opt -i input-file.i
</code></pre><p>Where <code>{NUM_THREADS}</code> is the number of threads you want executing the input deck.</p><p>Now that Gnat has been successfully installed and tested, feel free to check out the <a href="../tutorials/index.html">tutorials</a> to learn how to write a Gnat input deck. </p></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#3069d220-7dd0-40b8-8fdc-679155c18e47" class="tooltipped" data-position="left" data-tooltip="1 . Installing the MOOSE Environment">1 . Installing the MOOSE Environment</a></li><li><a href="#7e5ad5aa-cf4c-4523-a3ef-78b788b46579" class="tooltipped" data-position="left" data-tooltip="2 . Cloning Gnat and MOOSE">2 . Cloning Gnat and MOOSE</a></li><li><a href="#ebccaa9d-7298-4c36-bce7-2ef9d5957721" class="tooltipped" data-position="left" data-tooltip="3 . Compile Gnat">3 . Compile Gnat</a></li><li><a href="#bebf87b5-06e8-45e5-8fd9-03c3a0382b7a" class="tooltipped" data-position="left" data-tooltip="4 . Run Simulations">4 . Run Simulations</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../js/search_index.js"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>